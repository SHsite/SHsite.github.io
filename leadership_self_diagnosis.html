<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¦¬ë”ì‹­ ìê¸° ì§„ë‹¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        @media print {
            body * {
                visibility: hidden;
            }
            #result-page .bg-white, #result-page .bg-white * {
                visibility: visible;
            }
            #result-page .bg-white {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                box-shadow: none;
                border: none;
            }
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div id="survey-page" class="container mx-auto p-4 sm:p-8 max-w-4xl">
        <div class="bg-white p-6 sm:p-10 rounded-2xl shadow-lg">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-900">ë¦¬ë”ì‹­ ìê¸° ì§„ë‹¨</h1>
                <p class="text-gray-600 mt-2">ë³¸ ì§„ë‹¨ì€ ë¦¬ë” ë³¸ì¸ì˜ ë¦¬ë”ì‹­ ìˆ˜ì¤€ì„ ìŠ¤ìŠ¤ë¡œ ì ê²€í•˜ê³  ê°•ì ê³¼ ì•½ì ì„ íŒŒì•…í•˜ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.<br>ê° ë¬¸í•­ì„ ì‹ ì¤‘í•˜ê²Œ ì½ê³ , í˜„ì¬ ìì‹ ì˜ ëª¨ìŠµê³¼ ê°€ì¥ ê°€ê¹ë‹¤ê³  ìƒê°í•˜ëŠ” ê³³ì— ì†”ì§í•˜ê²Œ ì‘ë‹µí•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
            </div>

            <form id="diagnosis-form">
                <!-- ë¬¸í•­ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </form>

            <div class="mt-10 text-center">
                <button type="button" id="submit-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-300">
                    ì§„ë‹¨ ì™„ë£Œ
                </button>
            </div>
        </div>
    </div>

    <div id="result-page" class="container mx-auto p-4 sm:p-8 max-w-5xl hidden">
        <div class="bg-white p-6 sm:p-10 rounded-2xl shadow-lg">
            <div class="text-center sm:text-left mb-6 border-b pb-4">
                <h1 class="text-3xl font-bold text-gray-900">ë¦¬ë”ì‹­ ì§„ë‹¨ ê²°ê³¼</h1>
            </div>
            
            <!-- ìƒë‹¨: ë°©ì‚¬í˜• ì°¨íŠ¸ & ëŒ€ë¶„ë¥˜ ìˆœìœ„ -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="bg-gray-50 p-6 rounded-xl shadow-sm">
                    <h2 class="text-xl font-semibold text-center mb-4">ë¦¬ë”ì‹­ ì—­ëŸ‰ í”„ë¡œí•„ (12ê°œ ì„¸ë¶€ìš”ì¸)</h2>
                    <canvas id="radar-chart"></canvas>
                </div>
                <div class="bg-gray-50 p-6 rounded-xl shadow-sm">
                    <h2 class="text-xl font-semibold text-center mb-4">ë¦¬ë”ì‹­ ëŒ€ë¶„ë¥˜ë³„ ê°•ì  ìˆœìœ„</h2>
                    <div id="category-ranking" class="space-y-4 pt-4">
                        <!-- ìˆœìœ„ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>

            <!-- ì¤‘ë‹¨: ë§‰ëŒ€ ê·¸ë˜í”„ -->
            <div class="bg-gray-50 p-6 rounded-xl shadow-sm mb-8">
                <h2 class="text-xl font-semibold text-center mb-4">12ê°œ ì„¸ë¶€ìš”ì¸ë³„ ìƒì„¸ ì ìˆ˜</h2>
                <canvas id="bar-chart" style="max-height: 400px;"></canvas>
            </div>

            <!-- í•˜ë‹¨: ê°•ì  ë° ì•½ì  -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-green-50 border border-green-200 p-6 rounded-xl">
                    <h2 class="text-xl font-semibold text-green-800 mb-4">TOP 3 ê°•ì  ìš”ì¸</h2>
                    <ul id="strengths-list" class="list-disc list-inside space-y-2 text-gray-700">
                        <!-- ê°•ì ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </ul>
                </div>
                <div class="bg-red-50 border border-red-200 p-6 rounded-xl">
                    <h2 class="text-xl font-semibold text-red-800 mb-4">TOP 3 ë³´ì™„/ê°œì„  ìš”ì¸</h2>
                    <ul id="weaknesses-list" class="list-disc list-inside space-y-2 text-gray-700">
                        <!-- ì•½ì ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </ul>
                </div>
            </div>

            <!-- í•˜ë‹¨ ë²„íŠ¼ -->
            <div id="result-buttons" class="mt-10 pt-6 border-t text-center sm:flex sm:justify-center sm:space-x-4 space-y-4 sm:space-y-0">
                <button id="save-pdf-btn" class="bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-300 transition duration-300 w-full sm:w-auto">
                    ê²°ê³¼ ì €ì¥í•˜ê¸° (PDF)
                </button>
                <button id="retry-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-300 w-full sm:w-auto">
                    ë‹¤ì‹œ ì§„ë‹¨í•˜ê¸°
                </button>
            </div>
        </div>
    </div>
    
    <footer class="text-center py-6 text-gray-500 text-sm">
        Learn2Consulting All rights reserved
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
                { "category": "í˜ì‹  ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ ì°½ì¶œ", "factor": "a. ì™¸ë¶€í™˜ê²½/ê°€ì¹˜ì‚¬ìŠ¬ ì‚¬ê³ ", "text": "ë‚˜ëŠ” ë‚˜ì˜ 'ì—…(æ¥­)'ì„ ë‘˜ëŸ¬ì‹¼ ê±°ì‹œ í™˜ê²½ê³¼ ìµœì‹  ë™í–¥ì„ ë‹¤ì–‘í•œ ì±„ë„ì„ í†µí•´ ë¯¼ì²©í•˜ê²Œ íŒŒì•…í•©ë‹ˆë‹¤." },
                { "category": "í˜ì‹  ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ ì°½ì¶œ", "factor": "a. ì™¸ë¶€í™˜ê²½/ê°€ì¹˜ì‚¬ìŠ¬ ì‚¬ê³ ", "text": "ë‚˜ëŠ” ë³µì¡í•˜ê³  ê±°ëŒ€í•œ ì™¸ë¶€ ì •ë³´ë¥¼ ë¹ ë¥´ê²Œ ë‚˜ì˜ 'ì—…(æ¥­)'ì— ë§ê²Œ ì¬í•´ì„í•˜ê³  ì„ ì œì ìœ¼ë¡œ ëŒ€ì‘í•©ë‹ˆë‹¤." },
                { "category": "í˜ì‹  ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ ì°½ì¶œ", "factor": "a. ì™¸ë¶€í™˜ê²½/ê°€ì¹˜ì‚¬ìŠ¬ ì‚¬ê³ ", "text": "ë‚˜ëŠ” ë‹´ë‹¹ ì¡°ì§ ë° êµ¬ì„±ì›ë“¤ì—ê²Œ ìƒˆë¡œìš´ ê´€ì (View)ì™€ ì‚¬ì—… ì•„ì´ë””ì–´(Insight)ë¥¼ ì œì‹œí•˜ê³  ì „íŒŒí•©ë‹ˆë‹¤." },
                { "category": "í˜ì‹  ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ ì°½ì¶œ", "factor": "b. íŒ€ ë¹„ì „/í˜ì‹  ë°©í–¥ìˆ˜ë¦½", "text": "ë‚˜ëŠ” ì£¼ì–´ì§„ ê³¼ì œ ë‹¬ì„±ì— ë§Œì¡±í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ëª¨ìƒ‰í•©ë‹ˆë‹¤." },
                { "category": "í˜ì‹  ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ ì°½ì¶œ", "factor": "b. íŒ€ ë¹„ì „/í˜ì‹  ë°©í–¥ìˆ˜ë¦½", "text": "ë‚˜ëŠ” ë‹´ë‹¹ íŒ€ì˜ ë¯¸ë˜ ëª¨ìŠµ ë˜ëŠ” í˜ì‹  ë°©í–¥ì„ ëª…í™•íˆ ì œì‹œí•©ë‹ˆë‹¤." },
                { "category": "í˜ì‹  ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ ì°½ì¶œ", "factor": "b. íŒ€ ë¹„ì „/í˜ì‹  ë°©í–¥ìˆ˜ë¦½", "text": "ë‚˜ëŠ” íŒ€ êµ¬ì„±ì›ë“¤ì´ ë³€í™”ë¥¼ ì‹¤ì œë¡œ ì¶”ì§„í•  ìˆ˜ ìˆë„ë¡ ê³¼ì œë¥¼ êµ¬ì²´í™”í•©ë‹ˆë‹¤." },
                { "category": "í˜ì‹  ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ ì°½ì¶œ", "factor": "c. ê³µê°ëŒ€/ê³µìœ /í™˜ê²½ëŒ€ì‘ë ¥", "text": "ë‚˜ëŠ” ë‹´ë‹¹ íŒ€ì˜ ë¹„ì „ê³¼ ì „ëµì„ ìƒìƒí•œ Storyë¡œ ì§€ì†ì ìœ¼ë¡œ ê³µìœ í•©ë‹ˆë‹¤." },
                { "category": "í˜ì‹  ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ ì°½ì¶œ", "factor": "c. ê³µê°ëŒ€/ê³µìœ /í™˜ê²½ëŒ€ì‘ë ¥", "text": "ë‚˜ëŠ” êµ¬ì„±ì›ë“¤ë¡œë¶€í„° ì ê·¹ì ì¸ ê³µê°ê³¼ 'í•  ìˆ˜ ìˆë‹¤'ëŠ” ìì‹ ê°ì„ ìœ ë„í•©ë‹ˆë‹¤." },
                { "category": "í˜ì‹  ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ ì°½ì¶œ", "factor": "c. ê³µê°ëŒ€/ê³µìœ /í™˜ê²½ëŒ€ì‘ë ¥", "text": "ë‚˜ëŠ” ë¹„ì „ê³¼ ëª©í‘œ ë‹¬ì„±ì— ëŒ€í•œ íŒ€ êµ¬ì„±ì›ë“¤ì˜ ëª©ì  ì˜ì‹ì„ ê³ ì·¨í•©ë‹ˆë‹¤." },
                { "category": "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì „ëµì  ì‹¤í–‰ ì—­ëŸ‰", "factor": "d. ì±…ì„ ìˆëŠ” ê²°ê³¼ ë„ì¶œ", "text": "ë‚˜ëŠ” ì£¼ì–´ì§„ ê³¼ì œ ë‹¬ì„±ì— ë§Œì¡±í•˜ì§€ ì•Šê³  ìë°œì ìœ¼ë¡œ ìµœê³ (SUPEX)ìˆ˜ì¤€ì˜ ëª©í‘œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤." },
                { "category": "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì „ëµì  ì‹¤í–‰ ì—­ëŸ‰", "factor": "d. ì±…ì„ ìˆëŠ” ê²°ê³¼ ë„ì¶œ", "text": "ë‚˜ëŠ” ì˜ˆìƒì¹˜ ëª»í•œ ì¥ì• ë‚˜ í•œê³„ì— ë¶€ë”ªíˆë”ë¼ë„ ëˆê¸°ìˆê²Œ ê·¹ë³µí•©ë‹ˆë‹¤." },
                { "category": "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì „ëµì  ì‹¤í–‰ ì—­ëŸ‰", "factor": "d. ì±…ì„ ìˆëŠ” ê²°ê³¼ ë„ì¶œ", "text": "ë‚˜ëŠ” ëª©í‘œë¥¼ ì§‘ìš”í•˜ê²Œ ê´€ë¦¬/ì§€ì›í•˜ì—¬ ê¸°ëŒ€ ì´ìƒì˜ ì„±ê³¼ë¥¼ ë‹¬ì„±í•©ë‹ˆë‹¤." },
                { "category": "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì „ëµì  ì‹¤í–‰ ì—­ëŸ‰", "factor": "e. ë‚´/ì™¸ë¶€ ê¸´ë°€í•œ í˜‘ì—…", "text": "ë‚˜ëŠ” íŒ€ë‚´ êµ¬ì„±ì› ìƒí˜¸ ê°„ ê¸´ë°€í•˜ê²Œ í˜‘ë ¥í•˜ë„ë¡ ì´‰ì§„í•©ë‹ˆë‹¤." },
                { "category": "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì „ëµì  ì‹¤í–‰ ì—­ëŸ‰", "factor": "e. ë‚´/ì™¸ë¶€ ê¸´ë°€í•œ í˜‘ì—…", "text": "ë‚˜ëŠ” ê·¸ë£¹/íŒ€ê°„ ì´ê¸°ì£¼ì˜ë¥¼ íƒ€íŒŒí•˜ê³  íšŒì‚¬ ì „ì²´ ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•´, íƒ€ ë¶€ì„œë“¤ê³¼ ë‹¤ì°¨ì›ì ìœ¼ë¡œ í˜‘ì—…í•©ë‹ˆë‹¤." },
                { "category": "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì „ëµì  ì‹¤í–‰ ì—­ëŸ‰", "factor": "e. ë‚´/ì™¸ë¶€ ê¸´ë°€í•œ í˜‘ì—…", "text": "ë‚˜ëŠ” ì™¸ë¶€ ì´í•´ê´€ê³„ì ë˜ëŠ” íŒŒíŠ¸ë„ˆì™€ ìš°í˜¸ì ì¸ ê´€ê³„ë¥¼ í˜•ì„±í•©ë‹ˆë‹¤." },
                { "category": "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì „ëµì  ì‹¤í–‰ ì—­ëŸ‰", "factor": "f. ì‹ ì†í•œ ì‹¤í–‰ ë° ëŒíŒŒ", "text": "ë‚˜ëŠ” ë¬¸ì œ í•´ê²°ì— í•„ìš”í•œ í•µì‹¬ ì •ë³´ë¥¼ ë‹¤ê°ì /ì…ì²´ì ìœ¼ë¡œ íŒŒì•…í•©ë‹ˆë‹¤." },
                { "category": "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì „ëµì  ì‹¤í–‰ ì—­ëŸ‰", "factor": "f. ì‹ ì†í•œ ì‹¤í–‰ ë° ëŒíŒŒ", "text": "ë‚˜ëŠ” ë‹¹ë©´í•œ ìƒí™©ì´ë‚˜ ì •ë³´ì˜ ëª¨í˜¸í•¨ ì†ì—ì„œë„ êµ¬ì„±ì›ê³¼ í•¨ê»˜ í•´ê²° ëŒ€ì•ˆë“¤ì„ ì‹ ì†í•˜ê²Œ ë„ì¶œí•©ë‹ˆë‹¤." },
                { "category": "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì „ëµì  ì‹¤í–‰ ì—­ëŸ‰", "factor": "f. ì‹ ì†í•œ ì‹¤í–‰ ë° ëŒíŒŒ", "text": "ë‚˜ëŠ” ì‹¤í–‰ì´ ì§€ì—°ë˜ì§€ ì•Šë„ë¡ ë¹ ë¥´ê³  ë‹¨í˜¸í•˜ê²Œ ì˜ì‚¬ê²°ì •í•©ë‹ˆë‹¤." },
                { "category": "ì„±ì¥ ì¡°ì§ í’í†  êµ¬í˜„", "factor": "g. ì¸ì¬ ìœ¡ì„± ë° ì½”ì¹­", "text": "ë‚˜ëŠ” êµ¬ì„±ì› ì—­ëŸ‰ê°œë°œì„ ìœ„í•´ ë„ì „ì ì¸ ë¯¸ì…˜ì„ ë¶€ì—¬í•˜ë©° ì¼ì„ í†µí•œ ì„±ì¥ì„ ì´‰ì§„í•©ë‹ˆë‹¤." },
                { "category": "ì„±ì¥ ì¡°ì§ í’í†  êµ¬í˜„", "factor": "g. ì¸ì¬ ìœ¡ì„± ë° ì½”ì¹­", "text": "ë‚˜ëŠ” êµ¬ì„±ì› ì—­ëŸ‰ê°œë°œì„ ìœ„í•´ ë‚´/ì™¸ë¶€ êµìœ¡, ì„¸ë¯¸ë‚˜, í•™ìŠµ ìë£Œ ë“±ì„ ì ê·¹ì ìœ¼ë¡œ ì§€ì›í•©ë‹ˆë‹¤." },
                { "category": "ì„±ì¥ ì¡°ì§ í’í†  êµ¬í˜„", "factor": "g. ì¸ì¬ ìœ¡ì„± ë° ì½”ì¹­", "text": "ë‚˜ëŠ” êµ¬ì„±ì›ë“¤ì˜ ì—­ëŸ‰ ìˆ˜ì¤€ì„ íŒŒì•…í•˜ê³  ê° êµ¬ì„±ì›ì—ê²Œ í•„ìš”í•œ ì½”ì¹­ê³¼ ì§€ë„ë¥¼ í†µí•´ êµ¬ì„±ì›ì˜ ì„±ì¥ì„ ì§€ì›í•©ë‹ˆë‹¤." },
                { "category": "ì„±ì¥ ì¡°ì§ í’í†  êµ¬í˜„", "factor": "h. ë„ì „ê³¼ í˜ì‹  ë…ë ¤", "text": "ë‚˜ëŠ” êµ¬ì„±ì›ë“¤ì´ í•­ìƒ ìµœìƒì˜ ìˆ˜ì¤€ì„ ì—´ë§í•˜ê³ , ìŠ¤ìŠ¤ë¡œ ë†’ì€ ëª©í‘œì— ë„ì „í•˜ë„ë¡ ë…ë ¤í•©ë‹ˆë‹¤." },
                { "category": "ì„±ì¥ ì¡°ì§ í’í†  êµ¬í˜„", "factor": "h. ë„ì „ê³¼ í˜ì‹  ë…ë ¤", "text": "ë‚˜ëŠ” êµ¬ì„±ì›ë“¤ì´ ê¸°ì¡´ ì—…ë¬´ ë˜ëŠ” ë‹¹ë©´í•œ ë¬¸ì œë¥¼ ìƒˆë¡œìš´ ê´€ì ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë„ë¡ ìœ ë„í•©ë‹ˆë‹¤." },
                { "category": "ì„±ì¥ ì¡°ì§ í’í†  êµ¬í˜„", "factor": "h. ë„ì „ê³¼ í˜ì‹  ë…ë ¤", "text": "ë‚˜ëŠ” ì‹¤íŒ¨ì˜ ìœ„í—˜ì´ ìˆë”ë¼ë„, í˜ì‹ ì  ì•„ì´ë””ì–´ë¥¼ ì ê·¹ ì‹œë„í•´ ë³´ë„ë¡ ë…ë ¤í•©ë‹ˆë‹¤." },
                { "category": "ì„±ì¥ ì¡°ì§ í’í†  êµ¬í˜„", "factor": "i. ê°œë°©ì  íŒ€ë¶„ìœ„ê¸° ì¡°ì„±", "text": "ë‚˜ëŠ” êµ¬ì„±ì›ë“¤ì´ ê¸ì •ì /ë¦¬ë”ì™€ ë‹¤ë¥¸ ì˜ê²¬ì„ ììœ ë¡­ê²Œ ê°œì§„í•  ìˆ˜ ìˆë„ë¡ ë¶„ìœ„ê¸°ë¥¼ ì¡°ì„±í•©ë‹ˆë‹¤." },
                { "category": "ì„±ì¥ ì¡°ì§ í’í†  êµ¬í˜„", "factor": "i. ê°œë°©ì  íŒ€ë¶„ìœ„ê¸° ì¡°ì„±", "text": "ë‚˜ëŠ” ì¡°ì§ ë‚´ì—ì„œ ì—…ë¬´ ê´€ë ¨ ì •ë³´ê°€ ì ì‹œì— ê³µìœ ë  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤." },
                { "category": "ì„±ì¥ ì¡°ì§ í’í†  êµ¬í˜„", "factor": "i. ê°œë°©ì  íŒ€ë¶„ìœ„ê¸° ì¡°ì„±", "text": "ë‚˜ëŠ” í™˜ê²½ ë³€í™”ì— ë”°ë¼ ì‹ ì†í•˜ê³  ìœ ì—°í•˜ê²Œ ì¡°ì§ì„ ìš´ì˜í•©ë‹ˆë‹¤." },
                { "category": "ì†Œí†µê³¼ ì‹ ë¢° ê¸°ë°˜ ë¦¬ë”ì‹­", "factor": "j. ë¦¬ë”ì‹­ Values", "text": "ë‚˜ëŠ” íšŒì‚¬ì— ëŒ€í•œ ìë¶€ì‹¬ê³¼ ì• ì •ì„ ë°”íƒ•ìœ¼ë¡œ ì¡°ì§ì˜ ì¥ê¸°ì  ì„±ì¥ê³¼ ë°œì „ì„ ìœ„í•´ ë…¸ë ¥í•©ë‹ˆë‹¤." },
                { "category": "ì†Œí†µê³¼ ì‹ ë¢° ê¸°ë°˜ ë¦¬ë”ì‹­", "factor": "j. ë¦¬ë”ì‹­ Values", "text": "ë‚˜ëŠ” ì—…ë¬´ ìˆ˜í–‰ì‹œ ê¸°ë³¸ ì§€í‚¤ê¸°, ìœ¤ë¦¬ê²½ì˜ ì‹¤ì²œì— ì•ì¥ì„­ë‹ˆë‹¤." },
                { "category": "ì†Œí†µê³¼ ì‹ ë¢° ê¸°ë°˜ ë¦¬ë”ì‹­", "factor": "j. ë¦¬ë”ì‹­ Values", "text": "ë‚˜ëŠ” ì—…ë¬´ ìˆ˜í–‰ ì‹œ ì‚¬ì ì¸ ê°ì •ì´ë‚˜ ì¹œë¶„ê´€ê³„ë¥¼ ë°°ì œí•˜ê³  ê³µì •íˆ¬ëª…í•˜ê²Œ ì—…ë¬´ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤." },
                { "category": "ì†Œí†µê³¼ ì‹ ë¢° ê¸°ë°˜ ë¦¬ë”ì‹­", "factor": "k. ì—­í• ë°°ë¶„ ë° ì„±ê³¼ì§€ì›", "text": "ë‚˜ëŠ” ìê¸°ì£¼ë„ì ìœ¼ë¡œ ìê¸°ê³„ë°œì„ ì ê²€í•˜ê³  í•„ìš”í•œ ì—­ëŸ‰ì„ ê°œë°œí•˜ê¸° ìœ„í•´ ëŠì„ì—†ì´ ë…¸ë ¥í•©ë‹ˆë‹¤." },
                { "category": "ì†Œí†µê³¼ ì‹ ë¢° ê¸°ë°˜ ë¦¬ë”ì‹­", "factor": "k. ì—­í• ë°°ë¶„ ë° ì„±ê³¼ì§€ì›", "text": "ë‚˜ëŠ” êµ¬ì„±ì›ë“¤ì—ê²Œ ì‹¤ì§ˆì ì¸ ì±…ì„ì„ ë¶€ì—¬í•˜ê³ , ìŠ¤ìŠ¤ë¡œì˜ ì¼ì„ í†µì œí•  ìˆ˜ ìˆë„ë¡ ë¶ˆí•„ìš”í•œ ê°œì…ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." },
                { "category": "ì†Œí†µê³¼ ì‹ ë¢° ê¸°ë°˜ ë¦¬ë”ì‹­", "factor": "k. ì—­í• ë°°ë¶„ ë° ì„±ê³¼ì§€ì›", "text": "ë‚˜ëŠ” ê° êµ¬ì„±ì›ì˜ ì—…ë¬´ìˆ˜í–‰ ê²°ê³¼ì— ëŒ€í•´ ì‚¬ì‹¤ì„ ê¸°ë°˜ìœ¼ë¡œ ê³µì •í•˜ê²Œ í‰ê°€í•˜ê³  ì¶©ë¶„í•œ í”¼ë“œë°±ì„ ì œê³µí•©ë‹ˆë‹¤." },
                { "category": "ì†Œí†µê³¼ ì‹ ë¢° ê¸°ë°˜ ë¦¬ë”ì‹­", "factor": "l. ì†Œí†µ ë° ë¬¸ì œí•´ê²°", "text": "ë‚˜ëŠ” ë³¸ì¸ì˜ ì˜ê²¬ë§Œ ì œì‹œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ë‹¤ì–‘ì„±ì„ ì¸ì •í•˜ê³  íƒ€ì¸ì˜ ì˜ê²¬ì„ ê²½ì²­í•˜ì—¬ ê±´ì„¤ì  í˜‘ì˜ë¥¼ ì£¼ë„í•©ë‹ˆë‹¤." },
                { "category": "ì†Œí†µê³¼ ì‹ ë¢° ê¸°ë°˜ ë¦¬ë”ì‹­", "factor": "l. ì†Œí†µ ë° ë¬¸ì œí•´ê²°", "text": "ë‚˜ëŠ” íŒ€ ë‚´ êµ¬ì„±ì› ì—­í•  ì°¨ì´ì™€ ì´í•´ê´€ê³„ë¥¼ ì¶©ë¶„íˆ ì´í•´í•˜ê³  ìˆê³  ê°ˆë“± ë°œìƒ ì‹œ ì´ë¥¼ ì›ë§Œí•˜ê²Œ ì¤‘ì¬í•˜ê³  í˜‘ë ¥ì„ ì´ëŒì–´ ëƒ…ë‹ˆë‹¤." },
                { "category": "ì†Œí†µê³¼ ì‹ ë¢° ê¸°ë°˜ ë¦¬ë”ì‹­", "factor": "l. ì†Œí†µ ë° ë¬¸ì œí•´ê²°", "text": "ë‚˜ëŠ” ì—…ë¬´ ìˆ˜í–‰ ì¤‘ ê°‘ì‘ìŠ¤ëŸ¬ìš´ ëŒë°œ ìƒí™©ì—ë„ ë¬¸ì œì˜ ë³¸ì§ˆì„ ì •í™•íˆ íŒŒì•…í•˜ê³  ëŒ€ì•ˆì„ ì‹ ì†íˆ ì œì‹œí•˜ê³  ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤." }
            ];

            const form = document.getElementById('diagnosis-form');

            questions.forEach((q, index) => {
                const questionBlock = document.createElement('div');
                questionBlock.className = 'mb-6 p-4 bg-gray-50 rounded-lg';
                
                const questionText = document.createElement('p');
                questionText.className = 'font-semibold mb-3';
                questionText.textContent = `${index + 1}. ${q.text}`;
                questionBlock.appendChild(questionText);

                const radioGroup = document.createElement('div');
                radioGroup.className = 'flex flex-wrap items-center justify-center gap-x-2 gap-y-1 sm:gap-x-4 text-xs sm:text-sm';
                
                const labels = ['ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤', 'ê·¸ë ‡ì§€ ì•Šë‹¤', 'ë³´í†µì´ë‹¤', 'ê·¸ë ‡ë‹¤', 'ë§¤ìš° ê·¸ë ‡ë‹¤'];
                
                radioGroup.innerHTML += `<span class='text-gray-600 px-2 text-center'>${labels[0]}</span>`;
                const radioButtons = document.createElement('div');
                radioButtons.className = 'flex items-center justify-center space-x-2 sm:space-x-4';
                for (let i = 1; i <= 5; i++) {
                    radioButtons.innerHTML += `
                        <label for="q${index}_${i}" class="flex flex-col items-center cursor-pointer p-1">
                            <input type="radio" id="q${index}_${i}" name="q${index}" value="${i}" class="h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300" required>
                            <span class="mt-1">${i}</span>
                        </label>
                    `;
                }
                radioGroup.appendChild(radioButtons);
                radioGroup.innerHTML += `<span class='text-gray-600 px-2 text-center'>${labels[4]}</span>`;

                questionBlock.appendChild(radioGroup);
                form.appendChild(questionBlock);
            });

            const submitBtn = document.getElementById('submit-btn');
            submitBtn.addEventListener('click', () => {
                if (form.checkValidity()) {
                    calculateResults();
                } else {
                    alert('ëª¨ë“  ë¬¸í•­ì— ì‘ë‹µí•´ì£¼ì„¸ìš”.');
                    form.reportValidity();
                }
            });
            
            let radarChartInstance, barChartInstance;

            function calculateResults() {
                const formData = new FormData(form);
                const scores = [];
                for (let i = 0; i < questions.length; i++) {
                    scores.push(parseInt(formData.get(`q${i}`)));
                }

                const factorScores = {};
                questions.forEach((q, index) => {
                    if (!factorScores[q.factor]) {
                        factorScores[q.factor] = { sum: 0, count: 0, category: q.category };
                    }
                    factorScores[q.factor].sum += scores[index];
                    factorScores[q.factor].count++;
                });
                
                const factorAverages = Object.entries(factorScores).map(([factor, data]) => ({
                    factor: factor,
                    score: data.sum / data.count,
                    category: data.category
                }));

                const categoryScores = {};
                factorAverages.forEach(fa => {
                    if(!categoryScores[fa.category]) {
                        categoryScores[fa.category] = { sum: 0, count: 0 };
                    }
                    categoryScores[fa.category].sum += fa.score;
                    categoryScores[fa.category].count++;
                });

                const categoryAverages = Object.entries(categoryScores).map(([category, data]) => ({
                    category: category,
                    score: data.sum / data.count
                }));
                
                categoryAverages.sort((a, b) => b.score - a.score);
                const sortedFactorAverages = [...factorAverages].sort((a, b) => b.score - a.score);

                const strengths = sortedFactorAverages.slice(0, 3);
                const weaknesses = sortedFactorAverages.slice(-3).reverse();

                displayResults(factorAverages, categoryAverages, strengths, weaknesses);
            }

            function displayResults(factorAvgs, categoryAvgs, strengths, weaknesses) {
                document.getElementById('survey-page').classList.add('hidden');
                document.getElementById('result-page').classList.remove('hidden');
                window.scrollTo(0, 0);

                // Reorder factorAvgs to original order for charts
                const originalFactorOrder = [...new Set(questions.map(q => q.factor))];
                const sortedFactorAvgsForChart = originalFactorOrder.map(factorName => 
                    factorAvgs.find(f => f.factor === factorName)
                );
                
                const factorLabels = sortedFactorAvgsForChart.map(f => f.factor.split('. ')[1]);
                const factorData = sortedFactorAvgsForChart.map(f => f.score.toFixed(2));

                // 1. ë°©ì‚¬í˜• ì°¨íŠ¸
                const radarCtx = document.getElementById('radar-chart').getContext('2d');
                if (radarChartInstance) radarChartInstance.destroy();
                radarChartInstance = new Chart(radarCtx, {
                    type: 'radar',
                    data: {
                        labels: factorLabels,
                        datasets: [{
                            label: 'ì—­ëŸ‰ ì ìˆ˜',
                            data: factorData,
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(54, 162, 235, 1)'
                        }]
                    },
                    options: {
                        scales: {
                            r: { beginAtZero: true, max: 5, min: 0, ticks: { stepSize: 1 } }
                        },
                        plugins: { legend: { display: false } },
                        maintainAspectRatio: true,
                    }
                });

                // 2. ëŒ€ë¶„ë¥˜ ìˆœìœ„
                const rankingContainer = document.getElementById('category-ranking');
                rankingContainer.innerHTML = '';
                const rankEmojis = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰', ''];
                categoryAvgs.forEach((cat, index) => {
                    const rankItem = document.createElement('div');
                    rankItem.className = 'flex items-center p-3 rounded-lg shadow-inner';
                    rankItem.innerHTML = `
                        <span class="text-2xl w-10 text-center">${rankEmojis[index] || index + 1}</span>
                        <div class="flex-grow">
                            <span class="font-semibold text-lg">${cat.category}</span>
                            <div class="w-full bg-gray-200 rounded-full h-2.5 mt-1">
                                <div class="bg-blue-500 h-2.5 rounded-full" style="width: ${cat.score/5*100}%"></div>
                            </div>
                        </div>
                        <span class="font-bold text-xl ml-4 w-12 text-right">${cat.score.toFixed(2)}</span>
                    `;
                    rankingContainer.appendChild(rankItem);
                });

                // 3. ë§‰ëŒ€ ê·¸ë˜í”„
                const barCtx = document.getElementById('bar-chart').getContext('2d');
                if (barChartInstance) barChartInstance.destroy();
                barChartInstance = new Chart(barCtx, {
                    type: 'bar',
                    data: {
                        labels: factorLabels,
                        datasets: [{
                            label: 'ì„¸ë¶€ìš”ì¸ ì ìˆ˜',
                            data: factorData,
                            backgroundColor: 'rgba(75, 192, 192, 0.6)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        scales: { x: { beginAtZero: true, max: 5 } },
                        plugins: { legend: { display: false } },
                        maintainAspectRatio: false,
                    }
                });

                // 4. ê°•ì  ë° ì•½ì 
                const strengthsContainer = document.getElementById('strengths-list');
                strengthsContainer.innerHTML = '';
                strengths.forEach(s => {
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `<span class="font-semibold">${s.factor.split('. ')[1]}</span> - <span class="text-gray-600">í‰ê·  ${s.score.toFixed(2)}ì </span>`;
                    strengthsContainer.appendChild(listItem);
                });

                const weaknessesContainer = document.getElementById('weaknesses-list');
                weaknessesContainer.innerHTML = '';
                weaknesses.forEach(w => {
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `<span class="font-semibold">${w.factor.split('. ')[1]}</span> - <span class="text-gray-600">í‰ê·  ${w.score.toFixed(2)}ì </span>`;
                    weaknessesContainer.appendChild(listItem);
                });
            }
            
            document.getElementById('retry-btn').addEventListener('click', () => {
                 document.getElementById('result-page').classList.add('hidden');
                 document.getElementById('survey-page').classList.remove('hidden');
                 form.reset();
                 window.scrollTo(0, 0);
            });
            
            document.getElementById('save-pdf-btn').addEventListener('click', () => {
                const { jsPDF } = window.jspdf;
                const reportElement = document.querySelector("#result-page > .bg-white");
                const buttonsElement = document.getElementById('result-buttons');
                
                buttonsElement.style.visibility = 'hidden';

                html2canvas(reportElement, { scale: 2, useCORS: true }).then(canvas => {
                    try {
                        const imgData = canvas.toDataURL('image/png', 1.0);
                        const pdf = new jsPDF('p', 'mm', 'a4');
                        const pageHeight = pdf.internal.pageSize.getHeight();
                        const pageWidth = pdf.internal.pageSize.getWidth();
                        const imgHeight = canvas.height * pageWidth / canvas.width;
                        let heightLeft = imgHeight;
                        let position = 0;

                        pdf.addImage(imgData, 'PNG', 0, position, pageWidth, imgHeight);
                        heightLeft -= pageHeight;

                        while (heightLeft > 0) {
                          position -= pageHeight;
                          pdf.addPage();
                          pdf.addImage(imgData, 'PNG', 0, position, pageWidth, imgHeight);
                          heightLeft -= pageHeight;
                        }
                        pdf.save('ë¦¬ë”ì‹­_ì§„ë‹¨_ê²°ê³¼.pdf');
                    } catch (e) {
                        console.error("PDF ìƒì„± ì¤‘ ì˜¤ë¥˜:", e);
                        alert('PDFë¥¼ ì €ì¥í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    } finally {
                        buttonsElement.style.visibility = 'visible';
                    }
                });
            });
        });
    </script>
</body>
</html>
